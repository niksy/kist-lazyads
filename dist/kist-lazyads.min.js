/*! kist-lazyads 0.1.1 - Simple ads/banners async loading manager. | Author: Ivan NikoliÄ‡ <niksy5@gmail.com> (http://ivannikolic.com/), 2014 | License: MIT */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);var c=b;c=c.jQuery||(c.jQuery={}),c=c.kist||(c.kist={}),c.lazyads=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(c){var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a(6),f=a(12),g=a(9),h=a(10),i=b.exports=function(a){this.options=d.extend({},this.defaults,a),this.options.classes=d.extend({},this.defaults.classes,a.classes),e(this.options.content)||e(this.options.context)||("matchMedia"in c||d.error("window.matchMedia undefined."),this.banners=new g(d(this.options.el),this.options),this.context=new h(this.banners,this.options.context),this.options.init.call(this))};i.prototype.defaults={el:"[data-ad-id]",context:{},content:{},init:d.noop,contentIdDataProp:"ad-id",classes:{el:f.ns.htmlClass+"-item",isLoaded:"is-loaded",isHidden:"is-hidden"}},i.prototype.control=function(a){return this.banners.control.add(a),this},i.prototype.destroy=function(){return this.banners.destroy(),this.context.destroy(),this.banners=null,this.context=null,this}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b){"use strict";var c=a(3);b.exports=function(a,b){var d=a.length-1,e=b.length;if(0===d)return[];if(0===e)return a;for(var f=[],g=d;g>=0;g--){var h=a[g];-1===c(b,h)&&f.push(h)}return f}},{}],3:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],4:[function(a,b){"use strict";var c=a(5);b.exports=function(a){for(var b=[],d=0;d<a.length;d++)-1===c(b,a[d])&&b.push(a[d]);return b}},{}],5:[function(a,b){b.exports=a(3)},{}],6:[function(a,b){function c(a){if(null==a)return!0;if("number"==typeof a)return 0===a;if(void 0!==a.length)return 0===a.length;for(var b in a)if(d.call(a,b))return!1;return!0}b.exports=c;var d=Object.prototype.hasOwnProperty},{}],7:[function(a,b){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(){function a(a,h){a=a||"",h=h||{};for(var i in b)b.hasOwnProperty(i)&&(h.autoFix&&(h["fix_"+i]=!0),h.fix=h.fix||h["fix_"+i]);var j=[],k=function(a){return"string"==typeof a?a.replace(/(&#\d{1,4};)/gm,function(a){var b=a.substring(2,a.length-1);return String.fromCharCode(b)}):a},l=function(b){a+=b},m=function(b){a=b+a},n={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},o={comment:function(){var b=a.indexOf("-->");return b>=0?{content:a.substr(4,b),length:b+3}:void 0},endTag:function(){var b=a.match(d);return b?{tagName:b[1],length:b[0].length}:void 0},atomicTag:function(){var b=o.startTag();if(b){var c=a.slice(b.length);if(c.match(new RegExp("</\\s*"+b.tagName+"\\s*>","i"))){var d=c.match(new RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"));if(d)return{tagName:b.tagName,attrs:b.attrs,content:d[1],length:d[0].length+b.length}}}},startTag:function(){var b=a.match(c);if(b){var d={};return b[2].replace(e,function(a,b){var c=arguments[2]||arguments[3]||arguments[4]||f.test(b)&&b||null;d[b]=k(c)}),{tagName:b[1],attrs:d,unary:!!b[3],length:b[0].length}}},chars:function(){var b=a.indexOf("<");return{length:b>=0?b:a.length}}},p=function(){for(var b in n)if(n[b].test(a)){g&&console.log("suspected "+b);var c=o[b]();return c?(g&&console.log("parsed "+b,c),c.type=c.type||b,c.text=a.substr(0,c.length),a=a.slice(c.length),c):null}},q=function(a){for(var b;b=p();)if(a[b.type]&&a[b.type](b)===!1)return},r=function(){var b=a;return a="",b},s=function(){return a};return h.fix&&!function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,d=[];d.last=function(){return this[this.length-1]},d.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()},d.containsTagName=function(a){for(var b,c=0;b=this[c];c++)if(b.tagName===a)return!0;return!1};var e=function(a){return a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary),a},f=p,g=function(){var b=a,c=e(f());return a=b,c},i=function(){var a=d.pop();m("</"+a.tagName+">")},j={startTag:function(a){var b=a.tagName;"TR"===b.toUpperCase()&&d.lastTagNameEq("TABLE")?(m("<TBODY>"),l()):h.fix_selfClose&&c.test(b)&&d.containsTagName(b)?d.lastTagNameEq(b)?i():(m("</"+a.tagName+">"),l()):a.unary||d.push(a)},endTag:function(a){var b=d.last();b?h.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?i():d.pop():h.fix_tagSoup&&k()}},k=function(){f(),l()},l=function(){var a=g();a&&j[a.type]&&j[a.type](a)};p=function(){return l(),e(f())}}(),{append:l,readToken:p,readTokens:q,clear:r,rest:s,stack:j}}var b=function(){var a,b={},c=this.document.createElement("div");return a="<P><I></P></I>",c.innerHTML=a,b.tagSoup=c.innerHTML!==a,c.innerHTML="<P><i><P></P></i></P>",b.selfClose=2===c.childNodes.length,b}(),c=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,d=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,e=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,f=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,g=!1;a.supports=b,a.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"-->"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){return console.log(a),b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName;for(var c in a.attrs){var d=a.attrs[c];b+=" "+c+'="'+(d?d.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)},a.escapeAttributes=function(a){var b={};for(var c in a){var d=a[c];b[c]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var h in b)a.browserHasFlaw=a.browserHasFlaw||!b[h]&&h;this.htmlParser=a}(),e("undefined"!=typeof htmlParser?htmlParser:window.htmlParser)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b){(function(c){htmlParser=c.htmlParser=a(7),__browserify_shim_require__=a,function(a,b,c,d,e){!function(){function a(){}function b(a){return a!==m&&null!==a}function c(a){return"function"==typeof a}function d(a,b,c){var d,e=a&&a.length||0;for(d=0;e>d;d++)b.call(c,a[d],d)}function e(a,b,c){var d;for(d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])}function f(a,b){return e(b,function(b,c){a[b]=c}),a}function g(a,c){return a=a||{},e(c,function(c,d){b(a[c])||(a[c]=d)}),a}function h(a){try{return o.call(a)}catch(b){var c=[];return d(a,function(a){c.push(a)}),c}}function i(a){return a&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf("script"):!1}function j(a){return a&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf("style"):!1}var k={afterAsync:a,afterDequeue:a,afterStreamStart:a,afterWrite:a,beforeEnqueue:a,beforeWrite:function(a){return a},done:a,error:function(a){throw a},releaseAsync:!1},l=this,m=void 0;if(!l.postscribe){var n=!1,o=Array.prototype.slice,p=function(a){return a[a.length-1]},q=function(){function a(a,c,d){var e=k+c;if(2===arguments.length){var f=a.getAttribute(e);return b(f)?String(f):f}b(d)&&""!==d?a.setAttribute(e,d):a.removeAttribute(e)}function g(b,c){var d=b.ownerDocument;f(this,{root:b,options:c,win:d.defaultView||d.parentWindow,doc:d,parser:htmlParser("",{autoFix:!0}),actuals:[b],proxyHistory:"",proxyRoot:d.createElement(b.nodeName),scriptStack:[],writeQueue:[]}),a(this.proxyRoot,"proxyof",0)}var k="data-ps-";return g.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var a;!this.deferredRemote&&this.writeQueue.length;)a=this.writeQueue.shift(),c(a)?this.callFunction(a):this.writeImpl(a)},g.prototype.callFunction=function(a){var b={type:"function",value:a.name||a.toString()};this.onScriptStart(b),a.call(this.win,this.doc),this.onScriptDone(b)},g.prototype.writeImpl=function(a){this.parser.append(a);for(var b,c,d,e=[];(b=this.parser.readToken())&&!(c=i(b))&&!(d=j(b));)e.push(b);this.writeStaticTokens(e),c&&this.handleScriptToken(b),d&&this.handleStyleToken(b)},g.prototype.writeStaticTokens=function(a){var b=this.buildChunk(a);if(b.actual)return b.html=this.proxyHistory+b.actual,this.proxyHistory+=b.proxy,this.proxyRoot.innerHTML=b.html,n&&(b.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),n&&(b.actualInnerHTML=this.root.innerHTML),b},g.prototype.buildChunk=function(a){var b=this.actuals.length,c=[],e=[],f=[];return d(a,function(a){if(c.push(a.text),a.attrs){if(!/^noscript$/i.test(a.tagName)){var d=b++;e.push(a.text.replace(/(\/?>)/," "+k+"id="+d+" $1")),"ps-script"!==a.attrs.id&&"ps-style"!==a.attrs.id&&f.push("atomicTag"===a.type?"":"<"+a.tagName+" "+k+"proxyof="+d+(a.unary?" />":">"))}}else e.push(a.text),f.push("endTag"===a.type?a.text:"")}),{tokens:a,raw:c.join(""),actual:e.join(""),proxy:f.join("")}},g.prototype.walkChunk=function(){for(var c,d=[this.proxyRoot];b(c=d.shift());){var e=1===c.nodeType,f=e&&a(c,"proxyof");if(!f){e&&(this.actuals[a(c,"id")]=c,a(c,"id",null));var g=c.parentNode&&a(c.parentNode,"proxyof");g&&this.actuals[g].appendChild(c)}d.unshift.apply(d,h(c.childNodes))}},g.prototype.handleScriptToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.src=a.attrs.src||a.attrs.SRC,a.src&&this.scriptStack.length?this.deferredRemote=a:this.onScriptStart(a);var c=this;this.writeScriptToken(a,function(){c.onScriptDone(a)})},g.prototype.handleStyleToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.type=a.attrs.type||a.attrs.TYPE||"text/css",this.writeStyleToken(a),b&&this.write()},g.prototype.writeStyleToken=function(a){var b=this.buildStyle(a);this.insertStyle(b),a.content&&(b.styleSheet&&!b.sheet?b.styleSheet.cssText=a.content:b.appendChild(this.doc.createTextNode(a.content)))},g.prototype.buildStyle=function(a){var b=this.doc.createElement(a.tagName);return b.setAttribute("type",a.type),e(a.attrs,function(a,c){b.setAttribute(a,c)}),b},g.prototype.insertStyle=function(a){this.writeImpl('<span id="ps-style"/>');var b=this.doc.getElementById("ps-style");b.parentNode.replaceChild(a,b)},g.prototype.onScriptStart=function(a){a.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(a)},g.prototype.onScriptDone=function(a){return a!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},g.prototype.writeScriptToken=function(a,b){var c=this.buildScript(a),d=this.shouldRelease(c),e=this.options.afterAsync;a.src&&(c.src=a.src,this.scriptLoadHandler(c,d?e:function(){b(),e()}));try{this.insertScript(c),(!a.src||d)&&b()}catch(f){this.options.error(f),b()}},g.prototype.buildScript=function(a){var b=this.doc.createElement(a.tagName);return e(a.attrs,function(a,c){b.setAttribute(a,c)}),a.content&&(b.text=a.content),b},g.prototype.insertScript=function(a){this.writeImpl('<span id="ps-script"/>');var b=this.doc.getElementById("ps-script");b.parentNode.replaceChild(a,b)},g.prototype.scriptLoadHandler=function(a,b){function c(){a=a.onload=a.onreadystatechange=a.onerror=null}function d(){c(),b()}function e(a){c(),g(a),b()}var g=this.options.error;f(a,{onload:function(){d()},onreadystatechange:function(){/^(loaded|complete)$/.test(a.readyState)&&d()},onerror:function(){e({message:"remote script failed "+a.src})}})},g.prototype.shouldRelease=function(a){var b=/^script$/i.test(a.nodeName);return!b||!!(this.options.releaseAsync&&a.src&&a.hasAttribute("async"))},g}();l.postscribe=function(){function b(){var a,b=j.shift();b&&(a=p(b),a.afterDequeue(),b.stream=d.apply(null,b),a.afterStreamStart())}function d(c,d,g){function j(a){a=g.beforeWrite(a),m.write(a),g.afterWrite(a)}m=new q(c,g),m.id=i++,m.name=g.name||m.id,e.streams[m.name]=m;var k=c.ownerDocument,l={close:k.close,open:k.open,write:k.write,writeln:k.writeln};f(k,{close:a,open:a,write:function(){return j(h(arguments).join(""))},writeln:function(){return j(h(arguments).join("")+"\n")}});var n=m.win.onerror||a;return m.win.onerror=function(a,b,c){g.error({msg:a+" - "+b+":"+c}),n.apply(m.win,arguments)},m.write(d,function(){f(k,l),m.win.onerror=n,g.done(),m=null,b()}),m}function e(d,e,f){c(f)&&(f={done:f}),f=g(f,k),d=/^#/.test(d)?l.document.getElementById(d.substr(1)):d.jquery?d[0]:d;var h=[d,e,f];return d.postscribe={cancel:function(){h.stream?h.stream.abort():h[1]=a}},f.beforeEnqueue(h),j.push(h),m||b(),d.postscribe}var i=0,j=[],m=null;return f(e,{streams:{},queue:j,WriteStream:q})}()}}(),e("undefined"!=typeof postscribe?postscribe:window.postscribe)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b){(function(c){function d(a,b,c){return g(c).data(this.contentIdDataProp)===a}function e(a){var b=[];return g.each(a,function(a,c){b=b.concat(c)}),i(b)}function f(a){a.addClass(this.classes.isLoaded),this.control.resolve(a)}var g="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,h=a(8),i=a(4),j=a(11),k=a(12),l=b.exports=function(a,b){this.$el=a,this.contentIdDataProp=b.contentIdDataProp,this.content=b.content,this.classes=b.classes,this.list=e(b.context),this.control=new j,this.$el.addClass(this.classes.el)};l.prototype.get=function(a,b){var c=g();return b=b||function(){return!0},g.each(a,g.proxy(function(a,b){c=c.add(this.$el.filter(g.proxy(d,this,b)))},this)),c.filter(b)},l.prototype.show=function(a){var b=this.get(a);b.removeClass(this.classes.isHidden),this.control.resolve(b),this.populate(a)},l.prototype.hide=function(a){var b=this.get(a);b.addClass(this.classes.isHidden),this.control.resolve(b)},l.prototype.populate=function(a){var b=this.classes.isLoaded,c=this.get(a,function(a,c){return!g(c).hasClass(b)});c.each(g.proxy(function(a,b){this.write(g(b))},this))},l.prototype.write=function(a){var b=this.content[a.data(this.contentIdDataProp)];if(Boolean(b)){if(/responsive_google_ad/.test(b))return a.html(b),void f.call(this,a);b.match(/link.+href/)&&document.all&&!document.addEventListener&&g(b).filter("link").each(function(a,b){g('<link rel="stylesheet" href="'+g(b).attr("href")+'" class="'+k.ns.htmlClass+'-ieStyle" />').appendTo("head")}),h(a,b,g.proxy(f,this,a))}},l.prototype.destroy=function(){this.$el.removeClass(this.classes.banner),g("."+k.ns.htmlClass+"-ieStyle").remove(),this.control.destroy()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b){(function(c){function d(a){var b=!1;return f.each(a,function(a,c){return c.mq.matches?(b=!0,!1):void 0}),b}function e(a){a.matches&&this.calculate(),d(this.contexts)||this.banners.hide(this.banners.list)}var f="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,g=a(2),h=b.exports=function(a,b){this.banners=a,this.contexts=this.transformContexts(b),this.listen(),this.calculate()};h.prototype.transformContexts=function(a){var b={},c=f.proxy(this.getMatchMedia,this);return f.each(a,function(a,d){b[a]={context:a,mq:c(a),zones:d}}),b},h.prototype.getMatchMedia=function(a){return c.matchMedia(a)},h.prototype.listen=function(){f.each(this.contexts,f.proxy(function(a,b){b._listener=f.proxy(e,this),b.mq.addListener(b._listener)},this))},h.prototype.unlisten=function(){f.each(this.contexts,function(a,b){b.mq.removeListener(b._listener)})},h.prototype.calculate=function(){var a=[];f.each(this.contexts,function(b,c){c.mq.matches&&(a=a.concat(c.zones))}),this.banners.hide(g(this.banners.list,a)),this.banners.show(a)},h.prototype.destroy=function(){this.unlisten(),this.contexts={}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b){(function(a){function c(a,b){return function(c){a.trigger(c+":"+b,[a])}}function d(a){return function(b,c){setTimeout(e.proxy(b,a),c||300)}}var e="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null,f=b.exports=function(){this.list=[]};f.prototype.defaults={name:"",condition:function(){return!0},callback:e.noop},f.prototype.add=function(a){var b=this.list,c=!0;e.each(b,function(b,d){return d.name===a.name?(e.extend(d,a),c=!1,!1):void 0}),c&&b.push(e.extend({},this.defaults,a))},f.prototype.resolve=function(a){var b=this.list;a.each(function(){var a=e(this);e.each(b,e.proxy(function(b,e){Boolean(e.condition.call(this,a))&&e.callback.call(this,a,c(a,e.name),d(this))},this))})},f.prototype.destroy=function(){this.list=[]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b){b.exports={name:"lazyads",ns:{htmlClass:"kist-Lazyads"}}},{}]},{},[1])(1)});