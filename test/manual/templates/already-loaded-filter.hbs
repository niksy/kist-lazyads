{{> top title="Already loaded filter"}}

	<p>Here we have "skyscraper" which is considered as loaded at start.</p>

	<button type="button" class="resize" data-dimensions="800,600">800x600</button>
	<button type="button" class="resize" data-dimensions="600,600">600x600</button>
	<button type="button" class="resize" data-dimensions="320,480">320x480</button>
	<button type="button" class="resize" data-dimensions="1000,800">1000x800</button>
	<button type="button" class="resize" data-dimensions="1200,800">1200x800</button>
	<button type="button" class="resize" data-dimensions="1500,900">1500x900</button>

	<div class="Banner" data-ad-id="billboard"></div>
	<div class="Banner is-loaded" data-ad-id="skyscraper">Skyscraper loaded at start</div>
	<div class="Banner" data-ad-id="floating"></div>
	<div class="Banner" data-ad-id="wallpaper-right"></div>
	<div class="Banner" data-ad-id="wallpaper-left"></div>
	<div class="Banner" data-ad-id="mobile"></div>
	<div class="Banner" data-ad-id="empty-content"></div>

	<script>

		$('.resize').on('click', function () {
			var data = $(this).data('dimensions').split(',');
			window.resizeTo(data[0], data[1]);
		});

		var lazyads = new $.kist.Lazyads({
			el: '[data-ad-id]',
			context: {
				"screen and (min-width:1000px) and (max-width:1199px)": ["billboard","skyscraper","floating"],
				"screen and (min-width:1500px)": ["billboard","skyscraper","floating","wallpaper-right","wallpaper-left"],
				"screen and (min-width:915px) and (max-width:999px)": ["billboard","skyscraper","floating","floating"],
				"screen and (min-width:1200px) and (max-width:1499px)": ["billboard","skyscraper","floating","wallpaper-right","wallpaper-left"],
				"screen and (min-width:728px) and (max-width:914px)": ["billboard","floating"],
				"screen and (max-width:599px)": ["mobile"],
				"screen and (min-width:900px)": ["empty-content"]
			},
			content: {
				"floating": "floating",
				"wallpaper-left": "wallpaper-left",
				"wallpaper-right": "wallpaper-right",
				"billboard": "billboard",
				"mobile": "mobile",
				"skyscraper": "skyscraper",
				"empty-content": ""
			},
			alreadyLoadedFilter: function ( $el ) {
				return $el.hasClass('is-loaded');
			}
		});

		lazyads
			.control({
				name: 'billboard',
				condition: function ( el ) {
					return el.data('ad-id') === 'billboard';
				},
				callback: function ( el, emit ) {
					if ( el.hasClass('is-loaded') ) {
						if ( el.hasClass('is-hidden') ) {
							console.log('billboard, loaded, hidden');
							emit('foo');
						}
					}
				}
			})
			.control({
				name: 'skyscraper',
				condition: function ( el ) {
					return el.data('ad-id') === 'skyscraper';
				},
				callback: function ( el, emit ) {
					if ( el.hasClass('is-loaded') ) {
						if ( el.hasClass('is-hidden') ) {
							console.log('skyscraper, loaded, hidden');
						}
					}
				}
			})
			.control({
				name: 'mobile',
				condition: function ( el ) {
					return el.data('ad-id') === 'mobile';
				},
				callback: function ( el, emit, wait ) {
					console.log('mobile');
				}
			})
			.control({
				name: 'empty-content',
				condition: function ( el ) {
					return el.data('ad-id') === 'empty-content';
				},
				callback: function ( el, emit, wait ) {
					console.log('empty-content');
				}
			})
			.init(function () {
				console.log('Lazyads initialized!');
				console.log(this);
			});

		$('[data-ad-id="billboard"]').on('foo:billboard', function ( e, el ) {
			console.log(arguments);
		});

		$(document).on('foo:billboard', function ( e, el ) {
			console.log(e.currentTarget);
			console.log(e.target);
		});

	</script>

{{> bottom}}
